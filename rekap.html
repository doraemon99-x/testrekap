<!DOCTYPE html>
<html>
<head>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'/>
    <meta name="robots" content="noindex">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <title>Real Count PilPres 2024</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>
    <nav>
        <div class="logo">
            <a href="#"><img src="https://i.postimg.cc/7hBXqptn/tipion.png" alt="Logo"></a>
        </div>
    </nav>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1717;
            margin: 8px;
            text-align: center;
            
        }

        h2 {
            color: #cab705;
        }

        #datetime {
            color: aliceblue;
        }
        #progress {
            color: aliceblue;
        }
        
    </style>
    <h2>Real Count PilPres 2024</h2>
    <h2>Tingkat Nasional</h2>
    <canvas id="myChart" width="439" height="439" style="display: unset;box-sizing: border-box;height: 350px;width: 350px;"></canvas>>
    <p id="progress"></p>
    <script>
        async function getChartData() {
            let response = await fetch('https://sirekap-obj-data.kpu.go.id/pemilu/hr/ppwp.json');
            let data = await response.json();
            return data;
        }

        async function drawChart() {
            let data = await getChartData();

            // Ubah id data ke nama yang diinginkan
            let chartData = {
                "H. ANIES RASYID BASWEDAN": data.chart["100025"],
                "H. PRABOWO SUBIANTO": data.chart["100026"],
                "H. GANJAR PRANOWO": data.chart["100027"]
            };

            let labels = Object.keys(chartData);
            let values = Object.values(chartData);
            
            let ctx = document.getElementById('myChart').getContext('2d');
            let myChart = new Chart(ctx, {
                type: 'pie', // Ubah tipe chart ke 'pie'
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Perolahan Suara',
                        data: values,
                        backgroundColor: [
                            '#350269',
                            '#36A2EB',
                            '#8c0404'
                        ],
                        borderColor: [
                            '#350269',
                            '#36A2EB',
                            '#8c0404'
                        ],
                        hoverOffset: 10
                        }]
                    },
                    options: {
                    responsive: false,
                    plugins: {
                    legend: {
                labels: {
                    color: 'rgb(240, 248, 255)',
                    font: {
                        size: 14
                    }
                }
            }
        }
    }
})}

        drawChart();
    </script>
    <footer>
        <p id="progress"></p>
        <p id="datetime"></p>
        <script>
            var dt = new Date();
            document.getElementById("datetime").innerHTML = dt.toLocaleString();
        </script>
    </footer>
</body>
</html>
