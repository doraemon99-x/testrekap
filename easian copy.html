<!DOCTYPE html>
<html>
<head>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'/>
    <meta name="robots" content="noindex">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <title>Real Count PilPres 2024</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>
    <nav>
        <div class="logo">
            <a href="#"><img src="https://i.postimg.cc/7hBXqptn/tipion.png" alt="Logo"></a>
        </div>
    </nav>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1717;
            margin: 8px;
            text-align: center;
            
        }

        h2 {
            color: #563ceb;
        }

        #datetime {
            color: aliceblue;
        }

    </style>
    <h2>Real Count PilPres 2024</h2>
    <h2>Tingkat Nasional</h2>
    <canvas id="myChart"></canvas>
    <p id="progress"></p>
    <script>
        fetch('https://sirekap-obj-data.kpu.go.id/pemilu/hhcw/ppwp.json')
            .then(response => response.json())
            .then(data => {
                // Ubah ID '100025' menjadi 'Anis', '100026' menjadi 'Prabowo', dan '100027' menjadi 'Ganjar'
                if (data.chart['100025']) {
                    data.chart['Anis'] = data.chart['100025'];
                    delete data.chart['100025'];
                }
                if (data.chart['100026']) {
                    data.chart['Prabowo'] = data.chart['100026'];
                    delete data.chart['100026'];
                }
                if (data.chart['100027']) {
                    data.chart['Ganjar'] = data.chart['100027'];
                    delete data.chart['100027'];
                }

                // Hapus properti 'persen' dari data chart
                delete data.chart['persen'];

                // Tampilkan data 'progres' dan 'total'
                var progressPercentage = (data.progres.progres / data.progres.total * 100).toFixed(2);
                document.getElementById('progress').textContent = 'Progres: ' + progressPercentage + '%';

                var ctx = document.getElementById('myChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'pie',  // Ubah tipe grafik menjadi 'pie'
                    data: {
                        labels: Object.keys(data.chart),
                        datasets: [{
                            label: 'Data',
                            data: Object.values(data.chart),
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                    responsive: false,
                    plugins: {
                    legend: {
                labels: {
                    color: 'rgb(240, 248, 255)',
                    font: {
                        size: 14
                    }
                }
            }
        }
    }
})
        })
            .catch(error => console.error('Error:', error));
    </script>
</body>
</html>
